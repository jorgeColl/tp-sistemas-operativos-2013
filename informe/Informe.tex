%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Definición del tipo de documento.                                           %
% Posibles tipos de papel: a4paper, letterpaper, legalpapper                  %
% Posibles tamaños de letra: 10pt, 11pt, 12pt                                 %
% Posibles clases de documentos: article, report, book, slides                %
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\documentclass[a4paper,10pt]{article}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Los paquetes permiten ampliar las capacidades de LaTeX.                     %
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

% Paquete para inclusión de gráficos.
\usepackage{graphicx}
\usepackage{verbatim}

% Paquete notas al pie de página
\usepackage{footnote}

% Paquete que linkea el indice

\usepackage{hyperref}

\hypersetup{
    colorlinks,
    citecolor=black,
    filecolor=black,
    linkcolor=blue,
    urlcolor=black
}

% Agregar indice en el panel lateral.

\usepackage{ifpdf}
%if output to PDF then put the following in PDF header
\ifpdf  
    \pdfcatalog { /PageMode (/UseOutlines)
                  /OpenAction (fitbh)  }
\fi



% Paquete para definir la codificación del conjunto de caracteres usado
% (latin1 es ISO 8859-1).
\usepackage[latin1]{inputenc}

% Paquete para definir el idioma usado.
\usepackage[spanish]{babel}

\usepackage{listingsutf8}
\usepackage{listings}
\lstset{language={}, inputencoding=utf8/latin1, tabsize=4, showstringspaces=false, breaklines=true}

% Título principal del documento.
\title{	{\Huge{	\textbf{Trabajo Práctico: \\
		     Sistma de reserva de entradas sin costo comercial \\ }}}
		    {\hspace{30pt}}}

% Información sobre los autores.
\author{
            \normalsize{Grupo Nº 8 TEMA B} \\
            \normalsize{2do. Cuatrimestre de 2013} \\
            \normalsize{75.08 Sistmas Operativos}                             \\
            \normalsize{Facultad de Ingeniería, Universidad de Buenos Aires}            \\
       }
\date{}

\begin{document}

% Inserta el título.
\maketitle

% Quita el número en la primera página.
\thispagestyle{empty}

% Empieza en una pagina nueva.
\newpage

\tableofcontents

\newpage

\section{Hipótesis y Aclaraciones globales.}


\newpage



\section {Problemas Relevantes}

\newpage

\section{Archivos Readme}

\subsection{Readme\_Instalar}

\lstinputlisting{../Readme_Instalar}

\subsection{Readme\_Iniciar}

\lstinputlisting{../Readme_Iniciar}

\subsection{Readme\_Recibir}

\lstinputlisting{../Readme_Recibir}

\subsection{Readme\_Reservar}

\lstinputlisting{../Readme_Reservar}

\subsection{Readme\_Grabar\_L}

\lstinputlisting{../Readme_Grabar_L}

\subsection{Readme\_Imprimir}

\lstinputlisting{../Readme_Imprimir}

\subsection{Readme\_Matar\_D}

\lstinputlisting{../Readme_Matar_D}

\newpage 


\section{Esquema de Ejecución}

\section{Listado de nuevas funciones y/o comandos auxiliares}

\subsection{EstaInicializado.sh}

Como su nombre lo indica, permite detectar si el ambiente en el que se encuentra corriendo
el script ha sido inicializado o no. Ya que en varias partes del sistema se realiza este
chequeo, se ha encapsulado aquí para evitar la repetición de código.

\subsection{EstaCorriendo.sh}

Esta funcionalidad permite verificar si un proceso se encuentra en ejecución o no. Surge
de la necesidad de comprobar que un scritp como Recibir o Reservar, no se ejecuten más de 
una vez ya que podrían generarse inconsistencias en el sistema.

\subsection{Mover\_B.sh opción -c}

Si bien en las especificaciones se incluye el comando 'Mover\_B' se le ha agregado la opción
para que permita copiar ciertos archivos en vez de moverlos.
De este modo, con unas pequeñas modificaciones, utilizamos el mismo comando para la etapa de
instalación del sistema.





\section{Listado de Nuevos Archivos}
\subsection{LOGDIR/count}

Este archivo es creado por Recibir\_B. Tiene como propósito llevar la cuenta de la cantidad de
veces que se ha ejecutado el ciclo 'Recibir'. Consta de un único campo, de la forma n=Nº de Ciclo.

\subsection{GRUPO/instalacion.log}

Este archivo guardará el log de la instalación. Como al momento de realizar la misma, aún no se encuentran
definidos los directorios donde el usuario desea guardar sus datos, se usa este archivo especial para evitar
dicho inconveniente.

\subsection{CONFDIR/backup}

Esta carpeta se crea en el momento de la instalación. En ella se copiarán todos los archivos binarios que 
precisa el sistema para funcionar hasta que el usuario decida dónde va a ubicarlos.
Se trata de un directorio temporal, pues una vez que el usuario termina de realizar todas las configuraciones,
es eliminado.

\newpage
\section{Listado de Datos}

Para realizar la 'Prueba del camino Feliz' (ver sección ~\ref{sec:camino_feliz}) no sólo se 
han utilizado los datos provistos por la cátedra, sino que también se han agregado ciertos casos
no contemplados por los mismos. Como por ejemplo reservas fuera de fecha, nombres de archivos
inválidos, etc.
Para esta parte de las pruebas, los archivos \texttt{combos.dis, obras.mae} 
y \texttt{salas.mae} no han sido modificados.

A continuación, listamos los escenarios testeados y sus archivos asociados.



\begin{table} [h]
\centering
\begin{tabular}{ |p{6cm}|p{1,5cm}|p{4cm}| } 
\hline\hline
 Archivo                                    	& Provisto 	& Caso testeado \\ [0.5ex]
 \hline
1-LEYER\_DEMIAN@GMAIL.COM-EstrenoenelPayro332 	& SI 		& Obra disponible. \\
\hline
1-LEYER\_DEMIAN@GMAIL.COM-EstrenoenelPayro333	& SI 		& Obra no disponible. \\
\hline
1-MAIL\_INVALIDO@GMAIL.COM-EstrenoenelPayro332 & NO		& Mail inválido. \\
\hline
147-LEYER\_DEMIAN@GMAIL.COM-EstrenoenelPayro332 & NO		& ID obra inválido. \\
\hline
133-GRIFFO\_JULIO@GMAIL.COM-muchaAnticipacion 	 & NO 		& Reserva excede los 30 días. \\
\hline
NOMBRE\_INVALIDO				& NO		& Formato de nombre incorrecto. \\
\hline
133-GRIFFO\_JULIO@GMAIL.COM-vacio		& NO 		& Archivo vacío. \\
\hline
6-Teatro.Corrientes.Azul@reservas.com.ar-TCA\_3Nov13 & SI 	& Reserva por sala. No disponible. \\
\hline
18-Teatro.Payro@reservas.com.ar-PAyro251013a & SI 		& Reserva por sala. Disponible. \\
\hline
18-MAIL\_INVALIDO@GMAIL.COM-PAyro251013a	& NO 		& Mail inválido. \\
\hline
180-Teatro.Payro@reservas.com.ar-ID\_INVALIDO  & NO 		& ID sala inválido. \\

 \hline

 
 
 
\end{tabular}

\end{table}

\newpage
\section{Prueba del Camino Feliz}
\label{sec:camino_feliz}

Para realizar la prueba de una ejecución normal, desde que se instala el sistema, hasta llegar 
al comando imprimir, se cuenta con un script que va realizando cada paso. La salida de cada comando,
así como los archivos generados, se vuelcan en un archivo denominado 'caminoFeliz.out'


\end{document}
